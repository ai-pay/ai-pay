## Session
Listen for session changes (browser extension detected, user activated session, user ended session).

A session is created using the [AI Pay browser extension](https://chromewebstore.google.com/detail/ai-pay/igghgdjfklipjmgldcdfnpppgaijmhfg). Once the browser extension is installed [learn how to start a session](https://www.joinaipay.com/welcome).

An active session (with available budget) is required to make an AI Pay API calls.

To reduce cost while testing you can call the APIs with [stubbed responses](/stubbed-responses). The stubbed apis will not cost anything but will still be rate limited and validate the session before returning a response.

## Example
import { SessionStateListenerExample } from "../../examples/sessionStateListener"

<SessionStateListenerExample />

```typescript
import { AiPayClient } from "ai-pay/client"
import { SessionData } from "ai-pay/models";

// getInstance always returns the same AiPayClient class
const client = AiPayClient.getInstance()

const sessionCallback = (session: SessionData) => {
  const isActiveSession = session.sessionState === "ACTIVE"

  if (isActiveSession) {
    // Can make any AI Pay API request
    return
  }

  if (session.browserExtensionInstalled) {
    // Prompt the user to start a session
    return
  }

  // Prompt the user to download the AI Pay browser extension
}

client.subscribeToSessionState(sessionCallback)

client.unsubscribeFromSessionState(sessionCallback)
```