## Session
Listen for session changes (browser extension detected, user activated session, user ended session).

A session is created using the [AI Pay browser extension](https://chromewebstore.google.com/detail/ai-pay/igghgdjfklipjmgldcdfnpppgaijmhfg). Once the browser extension is installed [learn how to start a session](https://www.joinaipay.com/welcome).

An active session (with available budget) is required to make AI API calls.

To reduce cost while testing you can call the APIs with [stubbed responses](/stubbed-responses). The stubbed APIs will not cost anything but will still be rate limited and validate the session before returning a response.

## Example
import { SessionStateListenerExample } from "../../examples/sessionStateListener"

<SessionStateListenerExample />

```typescript
import { AiPayClient } from "ai-pay/client"
import { SessionData } from "ai-pay/models";

// getInstance always returns the same AiPayClient class
const client = AiPayClient.getInstance()

const sessionCallback = (session: SessionData) => {
  const isActiveSession = 

  if (session.browserExtensionInstalled) {
    // Prompt the user to install the AI Pay browser extension
    return
  }

  if (session.sessionState !== "ACTIVE") {
    // Prompt the user to start a session
    return
  }

  // You can now make any of the supported AI API calls
}

client.subscribeToSessionState(sessionCallback)
```